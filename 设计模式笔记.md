# 设计原则

## 单一职责原则

### 单一职责定义

​		应该有且仅有一个原因引起类的变更(一个类只负责一件事)

### 单一职责优点

​		a.类的复杂性降低，实现什么职责都有清晰明确的定义

​		b.可读性提高

​		c.可维护性提高

​		d.变更引起的风险降低

​		单一职责原则提出了一个编写程序的标准，用"职责"或"变化原因"来衡量接口或类设计的是否优良，但是"职责"和"变化原因"都是不可度量的，因项目而异，因环境而异。



​		对于接口，我们在设计的时候一定要做到单一，但是对于实现类就需要多方面考虑了。 生搬硬套单一职责原则会引起类的剧增，给维护带来非常多的麻烦，而且过分细分类的职责 也会人为地增加系统的复杂性。

​		接口一定要做到	单一职责，类的设计尽量做到只有一个原因引起变化。

## 里氏替换原则

### 继承的优点

​		a.代码共享，减少创建类的工作量，每个子类都拥有父类的方法和属性

​		b.提高代码的重用性

​		c.子类可以形似父类，但又异于父类

​		d.提高代码的可扩展性

​		e.提高产品或项目的开放性

### 继承的缺点

​		a.继承是侵入性的

​		b.降低代码的灵活性

​		c.增强了耦合性

### 里氏替换原则定义

​		所有引用基类的地方必须能透明地使用其子类的对象。

### 如何应用里氏替换原则

​		a.子类必须完全实现父类的方法

​				如果有子类不能完整的实现父类的方法，或者父类的某些方法在子类中已经发生"畸变"，则建议断开父子继承关系，采用依赖、聚集、组合等关系代替继承

​		b.子类可以有自己的个性

​				向下转型(downcast)是不安全的

​		c.重写或实现父类的方法时输入参数可以被放大

​		d.重写或实现父类的方法时输出参数可以被缩小

## 依赖倒置原则

### 依赖正置

 		对现实中存在的事物依赖称为依赖正置

​		对现实事物的抽象的依赖称为依赖倒置

依赖正置就是类间的依赖是实实在在的实现类间的依赖，也就是面向实现编程，这也是正常人的思维方式，我要开奔驰车就依赖奔驰车，我要使用笔记本电脑 就直接依赖笔记本电脑，而编写程序需要的是对现实世界的事物进行抽象，抽象的结果就是有了抽象类和接口，然后我们根据系统设计的需要产生了抽象间的依赖，代替了人们传统思 维中的事物间的依赖，“倒置”就是从这里产生的。

### 依赖倒置原则定义：

​		1.高层模块不应该依赖低层模块，两者都应该依赖其抽象类
​		2.抽象不应该依赖细节
​		3.细节应该依赖抽象

## 接口隔离原则

​	接口分为两种：
​		1.实例接口 (Person zhangsan = new Person,Person类是zhangsan的接口)

​		一个变量可以有两种类型：表面类型和实际类型。Person zhangsan中的Person是表面类型， new Person中的Person为实际类型。

​		2.类接口(使用interface定义的接口）

### 接口隔离原则定义

​		1.客户端不应该依赖它不需要的接口
​		2.类之间的依赖关系应该建立在最小的接口上

### 概括

​		接口尽量细化，接口中的方法尽可能少

### 接口隔离原则是对接口进行规范约束

​		1.接口要尽量小，但是必须满足单一职责原则。
​		2.接口要高内聚，高内聚就是提高接口、类、模块的处理能力，减少对外的交互。
​		3.定制服务，单独为一个个体提供优良服务。
​		4.接口的设计是有限度的，接口的设计粒度细化要适度。


### 与单一职责的矛盾之处

​		接口隔离原则与单一职责的审视角度是不相同的，单一职责要求的是类和接口职责单一，注重的是职责，这是业务逻辑上的划分，而接口隔离原则要求接口的方法尽量少。例如一个接口的职责可能包含10个方法，这10个方法都放在一个接口中，并且提供给多个模块访问，各个模块按照规定的权限来访问，在系统外通过文档约束“不使用的方法不要访问”，按照单一职责原则是允许的，按照接口隔离原则是不允许的，因为它要求“尽量使用多个专门的接口”。专门的接口指什么？就是指提供给每个模块的都应该是单一接口，提供给几个模块就应该有几个接口，而不是建立一个庞大的臃肿的接口，容纳所有的客户端访问。

## 迪米特法则

### 迪米特法则定义

​		一个对象应该对其他对象有最少的了解。

### 迪米特法则核心

​		类间解耦，弱耦合提高类的复用率，提高系统健壮性

### 迪米特法则对类的低耦合提出了明确要求

​		1.只和朋友类交流。

​		朋友类的定义是：出现在成员变量、方法的输入输出参数中的类称为成员朋友类，而出现在方法体内部的类不属于朋友类。

​		降低系统间耦合，提高系统的健壮性

​		2.朋友间也是有距离的。

​		一个类公开的public属性或方法越多，修改时涉及的面也就越大，变更引起的风险扩散也就越大。

​		3.是自己的就是自己的

​		如果一个方法放在本类中，既不增加类间关系，也对本类不产生负面影响，那就放置在本类中。

## 开闭原则

​			单一职责，里氏替换，依赖倒置，接口隔离，迪米特法则都是开闭原则的具现化，开闭原则是精神领袖。

### 开闭原则定义

​		一个软件实体如类、模块和函数应该对扩展开放，对修改关闭。

​		尽量通过扩展软件实体的行为实现变化，而不是通过修改已有的代码来实现变化。

### 为什么要采用开闭原则

​		1.对扩展开放使增加的实体测试更加容易

​		2.提高复用性

​		3.提高可维护性

​		单一职责，里氏替换，依赖倒置，接口隔离，迪米特法则等法则的优点都是开闭原则的意义。

### 如何使用开闭原则

​		1.抽象约束

​				a.通过接口或抽象类进行约束扩展，对扩展进行边界限定，不允许实现类出现在接口或抽象类中不存在的public方法。

​				b.参数类型、引用对象尽量使用接口或抽象类，而不是实现类。

​				c.抽象层尽量保持稳定，一旦确定即不允许修改。

​		2.元数据控制模块行为

​				尽量使用元数据来控制程序的行为，减少重复开发，其中达到极致的就是控制反转。

​				什么是元数据：用来描述环境和数据的数据，通俗的说就是配置参数，参数可以从文件或数据库中获得。

​		3.约定优于配置

​		4.封装变化

​				a.将相同的变化封装到一个接口或抽象类中

​				b.将不同的变化封装到不同的接口或抽象类中，不应该有两个不同的变化出现在同一个接口或 抽象类中

# 设计模式



​				